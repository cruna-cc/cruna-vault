# Cruna Core Protocol
## Introduction to Cruna - Revolutionizing Digital Asset Management

Welcome to Cruna, a pioneering platform in the blockchain world, where the security and management of digital assets are reimagined. Cruna stands out with its unique approach to consolidating and safeguarding your digital treasures, from cryptocurrencies to NFTs, all under one roof.

At the heart of Cruna lies the CrunaFlexiVault – a marvel in the NFT space, which is much more than just a digital safe. Each vault is an NFT itself, ingeniously owning and protecting an ERC-6551 smart wallet. This not only elevates the typical capabilities of NFTs but also introduces a fortress-like security layer to your digital assets, shielding them from the vulnerabilities often seen in standard digital wallets.

But that's not all. In the world of Cruna, you're not just owning a vault; you're embracing a complete ecosystem of protection and control. With the Protector System, imagine appointing trusted guardians for your assets. These Protectors act as your personal security detail, overseeing and authorizing high-stakes transactions, ensuring that your assets move only when you want them to, and how you want them to.

And there's more – the Safe Recipients feature. This lets you define a circle of trust, a whitelist of Ethereum addresses that are pre-approved for transactions. It's like having a VIP list for your digital assets, ensuring they interact only with the entities you trust.

Lastly, the crown jewel of Cruna – the Sentinels. In an event where you're unable to manage your assets, these Sentinels, chosen by you, step in. They form a Quorum, a council of decision-makers, who collectively manage and transfer your assets, ensuring that your digital legacy is preserved and passed on just as you intended.

In essence, Cruna is not just a platform; it's a paradigm shift in how digital assets are handled, offering unparalleled security, flexibility, and peace of mind. It's where your digital assets are not just stored but are truly secured, managed, and future-proofed.

In the following sections, we invite you to explore the intricate workings of the Cruna ecosystem. You'll discover how each component – from the CrunaFlexiVault to the Protectors, Safe Recipients, and Sentinels – interplays to create a seamless and secure digital asset management experience. Whether you're a seasoned crypto enthusiast or new to the world of digital assets, the detailed insights provided will illuminate how Cruna stands at the forefront of blockchain innovation. Read on to understand how Cruna is not just enhancing the present but shaping the future of digital asset management.

## Overview of Cruna and Protectors

### CrunaFlexiVault
The CrunaFlexiVault is an innovative NFT within the Cruna ecosystem, designed to own and protect an ERC-6551 smart wallet. This integration enhances ERC-721 NFTs capabilities and brings significant security enhancements to the ERC-6551 standard.

#### Features:
- **Smart Wallet Ownership**: The CrunaFlexiVault, as an NFT, owns an ERC-6551 smart wallet, providing a secure environment for digital assets.
- **Enhanced Security for ERC-6551 Wallets**: Adds crucial security layers to standard ERC-6551 wallets, protecting against vulnerabilities like phishing.

#### Usage:
- The primary use of the CrunaFlexiVault is to create and manage a secure ERC-6551 smart wallet, enabling enhanced security and functionality beyond traditional NFTs and standard ERC-6551 wallets.

### Protector System
The Protector System complements the CrunaFlexiVault by adding an additional layer of security. It allows NFT owners to assign protectors to their ERC-6551 smart wallets, enhancing their safety.

#### Key Concepts:
- **Protector**: Ethereum addresses designated to provide additional security for the ERC-6551 smart wallet owned by the CrunaFlexiVault.
- **Flexible Management**: Dynamic management of protectors to enhance the security of ERC-6551 smart wallets.

#### Functionalities:
- **Adding Protectors to Smart Wallets**: Bolsters security by enabling owners to assign protectors to their ERC-6551 wallets.
- **Approval Process for Transactions**: Protectors authorize high-stakes transactions, adding a verification layer for ERC-6551 wallet operations.
- **Enhanced Protector Management**: Crucial for the security of ERC-6551 smart wallets within the CrunaFlexiVault.

#### Use Cases:
- **Secured Asset Storage**: Secures assets within ERC-6551 smart wallets from unauthorized access and phishing attacks.
- **Protected High-Value Transactions**: Protectors ensure secure and verified transfers of significant assets in ERC-6551 wallets.

#### Example Workflow:
- **Vault Setup**: Owners set up the CrunaFlexiVault, creating a secure ERC-6551 smart wallet.
- **Managing Protectors**: Assign protectors to oversee and approve critical transactions within the CrunaFlexiVault.

## Safe Recipients in Cruna
The "Safe Recipients" feature is a critical security mechanism in Cruna, allowing NFT owners to designate specific Ethereum addresses for safe transactions.

#### Key Concepts:
- **Safe Recipient**: Trusted Ethereum addresses recognized as secure for NFT transactions and interactions.
- **Dynamic Management**: Allows owners to manage their list of safe recipients dynamically.

#### Functionalities:
- **Designation of Safe Recipients**: Owners ensure transaction security by designating safe recipients.
- **Protector's Authorization**: Protectors can authorize or influence the designation of safe recipients.
- **Flexibility in Management**: Adaptation to the owner's changing requirements by easily adding or removing safe recipients.

#### Use Cases:
- **Securing Transactions**: Ensures NFTs are transferred or interacted with only by pre-approved addresses.
- **Enhanced Oversight by Protectors**: Protectors oversee and authorize the setting of safe recipients, essential for high-value or sensitive NFTs.

#### Example Workflow:
- **Setting Up Safe Recipients**: Owners designate trusted addresses as safe recipients.
- **Managing Recipients**: Update the list of safe recipients, with or without protector involvement.

## Sentinels and Beneficiary in Cruna: Proof of Life System with Quorum
The "Sentinels" and "Beneficiary" features are pivotal in Cruna's Proof of Life system, designed for the secure management of NFTs in continuity-critical situations.

#### Key Concepts:
- **Sentinels**: Trusted Ethereum addresses managing NFTs when the owner is incapacitated or deceased.
- **Quorum System**: Requirement for Sentinels to reach a consensus on decisions, particularly regarding asset transfers.

#### Functionalities:
- **Sentinel Designation and Management**: Owners appoint or remove Sentinels for secure management.
- **Inheritance Configuration**: Sets inheritance parameters including Quorum and Proof of Life duration.
- **Proof of Life Maintenance**: Owners reset the Proof of Life timer, impacting the Quorum system's activation.

#### Use Cases:
- **Estate and Asset Management**: Sentinels manage or transfer NFTs according to the owner's wishes in their absence.
- **Collective Decision-Making**: Quorum system mandates collective decisions among Sentinels for balanced asset management.

#### Example Workflow:
- **Configuring Sentinels and Quorum**: Owners assign Sentinels and configure Quorum settings.
- **Engaging in Proof of Life**: Periodic updates by the owner influence the Quorum system among Sentinels.
- **Sentinel-Led Asset Transfer**: Collective decision-making by Sentinels on asset transfers following the owner's guidelines.

---
### Future developments

As the Cruna Core Protocol continues to evolve, many additions are currently in the pipeline: the Distributor Vault and the Inheritance Vault. Each of these vaults caters to specific needs, expanding the applications of the Cruna Core Protocol in the realms of asset management and security.

#### Distributor Vault

The Distributor Vault is a specialized vault designed to streamline the process of scheduled asset distribution. An entity can pre-load this vault with assets, which are then automatically distributed to the designated beneficiaries according to a predetermined schedule.

This functionality can be advantageous in numerous scenarios. For instance, a company wishing to distribute its governance tokens (ERC20) can purchase a Distributor Vault, fill it with the appropriate tokens, and set a vesting schedule. Once the NFT ownership of the Distributor Vault is given to an investor, the company no longer needs to actively manage token distribution. The tokens will be vested and delivered automatically as per the set schedule, providing the investor with an assurance of receiving their assets in a timely manner. This system is not only beneficial for investors, but it can also be employed for the scheduled distribution of tokens to employees, advisors, and other stakeholders.

#### Hardware protectors

Within the framework of the Cruna Protocol, we're introducing specialized USB keys designed to further bolster the security and functionality of our platform. These USB devices implement a streamlined wallet architecture singularly focused on executing typed V4 signatures. By narrowing down the wallet's capabilities to this specific type of signature, we ensure a higher level of protection against potential threats. When integrated with Cruna's unique Vault system, these USB keys serve as an inexpensive and robust protectors, amplifying the assurance our users have in the safety of their consolidated assets. This innovation reflects Cruna Protocol's commitment to staying at the forefront of cryptographic security, providing our users with tools that are both powerful and user-friendly.

#### Privacy protected Vaults

A new family of Zero Knowledge based vaults will allow a high level of privacy.

## History

**0.0.1**

- First version

## Test coverage

```
  12 passing (3s)

-----------------------------|----------|----------|----------|----------|----------------|
File                         |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |
-----------------------------|----------|----------|----------|----------|----------------|
 contracts/                  |       60 |       40 |    66.67 |    71.43 |                |
  CrunaFlexiVault.sol        |       60 |       40 |    66.67 |    71.43 |          50,55 |
 contracts/factory/          |    57.14 |     37.5 |    81.82 |    58.18 |                |
  IVaultFactory.sol          |      100 |      100 |      100 |      100 |                |
  VaultFactory.sol           |    57.14 |     37.5 |    81.82 |    58.18 |... 126,130,143 |
 contracts/manager/          |    56.48 |    32.65 |    59.52 |     54.4 |                |
  Actor.sol                  |    78.13 |    44.44 |    81.82 |    72.97 |... 67,68,69,72 |
  Guardian.sol               |      100 |      100 |        0 |      100 |                |
  IActor.sol                 |      100 |      100 |      100 |      100 |                |
  IManager.sol               |      100 |      100 |      100 |      100 |                |
  Manager.sol                |    47.37 |       30 |    51.72 |    46.59 |... 356,357,360 |
  ManagerProxy.sol           |      100 |      100 |      100 |      100 |                |
 contracts/protected/        |    67.86 |    33.33 |    63.64 |    66.67 |                |
  IERC6454.sol               |      100 |      100 |      100 |      100 |                |
  IProtected.sol             |      100 |      100 |      100 |      100 |                |
  ProtectedNFT.sol           |    67.86 |    33.33 |    63.64 |    66.67 |... 131,132,148 |
 contracts/utils/            |    92.31 |    66.67 |    66.67 |    81.82 |                |
  SignatureValidator.sol     |      100 |     87.5 |      100 |     87.5 |             31 |
  UUPSUpgradableTemplate.sol |      100 |       25 |       50 |      100 |                |
  Versioned.sol              |        0 |      100 |        0 |        0 |              9 |
-----------------------------|----------|----------|----------|----------|----------------|
All files                    |    60.71 |    36.19 |    64.47 |    59.07 |                |
-----------------------------|----------|----------|----------|----------|----------------|
```

## License

Copyright (C) 2023 Cruna

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You may have received a copy of the GNU General Public License
along with this program. If not,
see <https://www.gnu.org/licenses/gpl-3.0.en.html>.
